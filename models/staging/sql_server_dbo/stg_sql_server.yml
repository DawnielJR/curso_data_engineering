version: 2

models:

      - name: stg_promos
        description: >
          All info about promo table
        columns:
          - name: promo_name
            description: >
              Represent the Promo name
            tests:
                  - not_null
          - name: discount_usd
            description: >
              Discount for each product
            tests:
                  - not_null
                  - positive_values
          - name: promo_status
            description: >
              Represent the status for promos, active or inactive was changed to status_promo
            tests:
              - not_null
              - accepted_values: 
                  values: ['inactive', 'active']
          - name: promo_id
            description: >
              Surrogated key for promo table
            tests: 
              - unique
              - not_null
          - name: _fivetran_deleted
          - name: _fivetran_synced



      - name: stg_orders
        description: "stg model for order table"
        columns:
          - name: order_id
            description: "Order identifier"
            tests:
              - unique
              - not_null
          - name: shipping_service
            description: "Shipping service"
            tests:
              - not_null
              - accepted_values: 
                  values: ['ups','fedex','dhl','usps','undefined']
          - name: shipping_cost_usd
            description: "shipping cost on usd"
            tests:
              - not_null
              - positive_values
          - name: address_id
            description: "Address identifier"
            tests:
              - relationships:
                  to: ref('stg_addresses')
                  field: address_id
          - name: created_at_utc
            description: "Date that was created the order"
            tests:
              - not_null
          - name: estimated_delivery_date_utc
            description: "Estimated delivery date on utc"
          - name: estimated_delivery_time_utc
            description: "Estimated delivery time on utc"
          - name: order_cost_usd
            description: "order cost on USD"
            tests:
              - not_null
              - positive_values
          - name: user_id
            description: "User identifier"
            tests:
              - relationships:
                  to: ref('stg_users')
                  field: user_id
          - name: order_total_usd
            description: "total cost on usd"
            tests:
              - not_null
              - positive_values
          - name: delivered_date_utc
            description: "delivered date on UTC"
          - name: delivered_time_utc
            description: "delivered time on UTC"
          - name: tracking_id
            description: "Tracking identifier"
            tests:
              - not_null
          - name: promo_id
            description: "Promo identifier"
            tests:
              - not_null
              - relationships:
                  to: ref('stg_promos')
                  field: promo_id
          - name: status
            description: "Order status"
            tests:
              - not_null
              - accepted_values: 
                  values: ['preparing','shipped','delivered']
          - name: date_load_utc
            description: "date data was load on UTC"
          - name: status_id
            description: "hash Id for status"
            tests:
              - not_null
          - name: shipping_service_id
            description: "hash ID for shipping_Service"
            tests: 
              - not_null




      - name: stg_addresses
        description: All info about adresses table
        columns:
          - name: address_id
            description: "Unique identifier for the address"
            tests:
                - unique
                - not_null
          - name: zipcode
            description: "Zip code of the address"
            tests:
                - not_null
          - name: country
            description: "Country of the address"
            tests:
                - not_null
          - name: address
            description: "Street address"
            tests:
                - not_null
          - name: state
            description: "State of the address"
            tests:
                - not_null
          - name: full_address
            description: "Concatenation of address components"
            tests:
                - not_null
          - name: date_load
            description: "Date when the record was loaded"

      - name: stg_date_compl
        description: >
          Model representing forecast dates
        columns:
          - name: forecast_date
            description: "Forecast date"
          - name: id_date
            description: "Unique identifier for the date"
            tests:
                - unique
                - not_null
          - name: year
            description: "Year of the date"
            tests:
                - not_null
          - name: month
            description: "Month of the date"
            tests:
                - not_null
          - name: desc_month
            description: "Month name of the date"
          - name: id_year_month
            description: "Unique identifier for year and month"
          - name: previous_day
            description: "Previous day of the date"
          - name: year_week_day
            description: "Year, ISO week, and day of the week"
          - name: week
            description: "ISO week of the date"
            tests:
                - not_null
         
      - name: stg_event_type
        description: "Staging model for event type"
        columns:
          - name: event_type_id
            description: "Surrogate key for event types"
            tests:
                - unique
                - not_null
          - name: event_type
            description: "Type of the event"
            tests:
                - not_null

      - name: stg_events
        description: "Staging model for events"
        columns:
          - name: event_id
            description: "ID of the event"
            tests:
                - unique
                - not_null
          - name: page_url
            description: "URL of the page"
            tests:
                - not_null
          - name: product_id
            description: "Product idenfier"
            tests:
              - relationships:
                  to: ref('stg_products')
                  field: product_id
          - name: user_id
            description: "ID of the user"
            tests:
              - not_null
              - relationships:
                  to: ref('stg_users')
                  field: user_id
          - name: session_id
            description: "ID of the session"
            tests:
              - not_null
          - name: created_date
            description: "Date of event creation"
            tests:
              - not_null
          - name: created_time
            description: "Time of event creation"
          - name: order_id
            tests:
              - not_null
              - unique
            description: "ID of the order associated with the event"
          - name: date_load_utc
            description: "Date and time when the record was loaded in UTC"

      - name: stg_order_items
        description: "Staging model for order items"
        columns:
          - name: order_id
            description: "ID of the order"
            tests: 
              - relationships:
                  to: ref('stg_orders')
                  field: order_id
          - name: order_item_id
            description: "Hash of ID order"
            tests:
              - not_null
              - unique
          - name: product_id
            description: "ID of the product"
            tests:
              - relationships:
                  to: ref('stg_sql_products')
                  field: product_id
          - name: quantity
            description: "Quantity of the product in the order"
            tests:
              - not_null
              - positive_values
          - name: date_load_utc
            description: "Date and time when the record was loaded in UTC"

      - name: stg_products
        description: "Staging model for products"
        columns:
          - name: product_id
            description: "ID of the product"
            tests:
              - unique
          - name: price_usd
            description: "Price of the product in USD"
            tests:
              - not_null
              - positive_values
          - name: product_name
            description: "Name of the product"
            tests:
              - not_null
          - name: inventory
            description: "Inventory count of the product"
            tests:
              - not_null
              - positive_values
          - name: date_load_utc
            description: "Date and time when the record was loaded in UTC"

      - name: stg_users
        description: "Staging model for users"
        columns:
        - name: user_id
          description: "ID of the user"
          tests:
              - unique 
              - not_null          
        - name: address_id
          description: "ID of the user's address"
          tests:
              - relationships:
                  to: ref('stg_addresses')
                  field: address_id
        - name: first_name
          description: "First name of the user"
          tests:
              - not_null
        - name: last_name
          description: "Last name of the user"
          tests:
              - not_null
        - name: phone_number
          description: "Phone number of the user"
          tests:
              - not_null
        - name: email
          description: "Email address of the user"
          tests:
              - not_null
        - name: created_at_date
          description: "Date when the user was created"
        - name: created_at_time
          description: "Time when the user was created"
        - name: updated_at_date
          description: "Date when the user was last updated"
        - name: updated_at_time
          description: "Time when the user was last updated"
        - name: total_orders
          description: "Total number of orders for the user"
        - name: date_load_utc
          description: "Date and time when the record was loaded in UTC"



  

